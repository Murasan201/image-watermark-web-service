# ç”»åƒã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒ¼ã‚¯Webã‚µãƒ¼ãƒ“ã‚¹ - é–‹ç™ºã‚¬ã‚¤ãƒ‰

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
ç”»åƒã«ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒ¼ã‚¯ã‚’ä¸€æ‹¬é©ç”¨ã—ã€ZIPå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹Webã‚µãƒ¼ãƒ“ã‚¹

## è¦ä»¶å®šç¾©æ›¸
- **è¦ä»¶å®šç¾©æ›¸**: `image-watermark-web-service-spec.md`
- ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å…¨è¦ä»¶ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™
- å®Ÿè£…å‰ã«å¿…ãšè¦ä»¶å®šç¾©æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React/Vue.js (SPA)
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Vercel Serverless Functions  
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Neon PostgreSQL (èªè¨¼ã®ã¿)
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Vercel
- **ç”»åƒå‡¦ç†**: HTML5 Canvas ã¾ãŸã¯ WebAssemblyç‰ˆImageMagick
- **ZIPç”Ÿæˆ**: JSZip

## ä¸»è¦æ©Ÿèƒ½
1. ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (.jpg/.jpeg ã®ã¿)
2. ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒ¼ã‚¯è¨­å®š (ãƒ†ã‚­ã‚¹ãƒˆã€ãƒ•ã‚©ãƒ³ãƒˆã€ä½ç½®ã€é€æ˜åº¦ç­‰)
3. ä¸€æ‹¬å‡¦ç†ãƒ»ZIP ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
4. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ (JSON)
5. èªè¨¼æ©Ÿèƒ½

## é–‹ç™ºãƒ«ãƒ¼ãƒ«
- å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«: .jpg/.jpeg ã®ã¿
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: HTTPSå¿…é ˆã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ãƒãƒƒã‚·ãƒ¥åŒ–
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œå¿…é ˆ
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œå¿…é ˆ

## èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 

### ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å¥‘ç´„è€…ï¼‰
- **æ–¹å¼**: æœˆæ¬¡æ‹›å¾…ã‚³ãƒ¼ãƒ‰èªè¨¼ï¼ˆã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å¥‘ç´„è€…é™å®šï¼‰
- **ã‚³ãƒ¼ãƒ‰å½¢å¼**: YYYYMM-XXXXXï¼ˆä¾‹: 202501-A7B9Cï¼‰
- **æœ‰åŠ¹æœŸé–“**: å½“æœˆæœ«ã¾ã§ï¼ˆæ™‚é–“åˆ¶é™ãªã—ï¼‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³**: ã‚³ãƒ¼ãƒ‰èªè¨¼å¾Œã¯æœˆæœ«ã¾ã§ç¶™ç¶š
- **ç®¡ç†**: ç®¡ç†ç”»é¢ + Slacké€šçŸ¥ã®ä¸¡æ–¹ã§é‹ç”¨
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: invitation_codes, user_sessions ãƒ†ãƒ¼ãƒ–ãƒ«

### ç®¡ç†è€…èªè¨¼
- **æ–¹å¼**: å›ºå®šIDãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ï¼ˆç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼‰
- **ç®¡ç†è€…**: å˜ä¸€ç®¡ç†è€…ã®ã¿
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³**: JWT ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ24æ™‚é–“æœ‰åŠ¹ï¼‰
- **URL**: `/admin` é…ä¸‹
- **ç’°å¢ƒå¤‰æ•°**: 
  - `ADMIN_USERNAME` : ç®¡ç†è€…ID
  - `ADMIN_PASSWORD_HASH` : bcryptãƒãƒƒã‚·ãƒ¥å€¤
  - `JWT_SECRET` : JWTç½²åç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: admin_sessions ãƒ†ãƒ¼ãƒ–ãƒ«

## Slacké€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- **é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ–°ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã®ã¿
- **ä¿å­˜æ–¹å¼**: Webhook URL ã‚’æš—å·åŒ–ã—ã¦DBä¿å­˜
- **è¨­å®šæ–¹æ³•**: ç®¡ç†ç”»é¢ã§Webhook URLå…¥åŠ›
- **é€šçŸ¥å†…å®¹**: 
  - ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰
  - æœ‰åŠ¹æœŸé™
  - ä½¿ç”¨å›æ•°ï¼ˆ0å›ï¼‰
  - ç®¡ç†ç”»é¢ãƒªãƒ³ã‚¯
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: 
  - URLå½¢å¼æ¤œè¨¼
  - é€ä¿¡é »åº¦åˆ¶é™ï¼ˆ1åˆ†é–“10å›ï¼‰
  - ãƒªãƒˆãƒ©ã‚¤åˆ¶é™ï¼ˆ3å›ã¾ã§ï¼‰
- **ç’°å¢ƒå¤‰æ•°**: `ENCRYPT_KEY` ï¼ˆæš—å·åŒ–ã‚­ãƒ¼ï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: admin_settings ãƒ†ãƒ¼ãƒ–ãƒ«

## ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒ»å‡¦ç†åˆ¶é™
### Vercel Functionåˆ¶é™æº–æ‹ 
- **1ãƒ•ã‚¡ã‚¤ãƒ«**: 3MBä»¥ä¸‹
- **åŒæ™‚å‡¦ç†**: æœ€å¤§5ãƒ•ã‚¡ã‚¤ãƒ«
- **ç·è¨ˆ**: 15MBä»¥ä¸‹/ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- **åŒæ™‚ãƒ¦ãƒ¼ã‚¶ãƒ¼**: 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿å‡¦ç†ã€ä»–ã¯ã‚­ãƒ¥ãƒ¼å¾…æ©Ÿ

### å‡¦ç†æ–¹å¼ï¼šãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è‡ªå‹•æŒ¯ã‚Šåˆ†ã‘
- **åŸºæœ¬æ–¹é‡**: é‹ç”¨ã‚³ã‚¹ãƒˆæœ€é©åŒ–ã‚’å„ªå…ˆã—ãŸè‡ªå‹•æŒ¯ã‚Šåˆ†ã‘
- **ãƒ‡ãƒ¼ã‚¿ä¿æŒ**: ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªå‡¦ç†ï¼ˆå¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãªã—ï¼‰
- **é›¢è„±å¯¾ç­–**: ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã€é›¢è„±é˜²æ­¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **ã‚­ãƒ¥ãƒ¼ç®¡ç†**: æœ€å¤§5äººå¾…æ©Ÿã€10åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‡¦ç†ï¼ˆCanvas APIï¼‰
```
æ¡ä»¶: 1ãƒ•ã‚¡ã‚¤ãƒ« ã‹ã¤ 1.5MBä»¥ä¸‹
å‡¦ç†æ™‚é–“: ç´„1-5ç§’
ä½¿ç”¨æŠ€è¡“: HTML5 Canvas APIï¼ˆç„¡æ–™ï¼‰
ãƒ¡ãƒªãƒƒãƒˆ: ã‚µãƒ¼ãƒãƒ¼ãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»ã‚¼ãƒ­ã€é«˜é€Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

#### ã‚µãƒ¼ãƒãƒ¼å‡¦ç†ï¼ˆSharp + Node.jsï¼‰
```
æ¡ä»¶: 2-5ãƒ•ã‚¡ã‚¤ãƒ« ã‹ã¤ ç·è¨ˆ15MBä»¥ä¸‹
å‡¦ç†æ™‚é–“: ç´„5-10ç§’
ä½¿ç”¨æŠ€è¡“: Sharpï¼ˆNode.jsï¼‰
ãƒ¡ãƒªãƒƒãƒˆ: é«˜å“è³ªå‡¦ç†ã€ãƒ¡ãƒ¢ãƒªåŠ¹ç‡
```

#### æŒ¯ã‚Šåˆ†ã‘ãƒ­ã‚¸ãƒƒã‚¯
```javascript
function determineProcessingMethod(files) {
  const totalSize = files.reduce((sum, file) => sum + file.size, 0);
  const fileCount = files.length;
  
  // Canvas APIï¼ˆå¿«é©å‡¦ç†ï¼‰
  if (fileCount === 1 && files[0].size <= 1.5 * 1024 * 1024) {
    return 'CLIENT';
  }
  
  // Serverå‡¦ç†
  if (fileCount <= 5 && totalSize <= 15 * 1024 * 1024) {
    return 'SERVER';
  }
  
  return 'ERROR';
}
```

### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- å‡¦ç†ä¸­ãƒ‡ãƒ¼ã‚¿: 30åˆ†ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
- ç•°å¸¸çµ‚äº†ã‚»ãƒƒã‚·ãƒ§ãƒ³: è‡ªå‹•è§£æ”¾
- cronå®Ÿè¡Œ: æ¯æ™‚å®Ÿè¡Œ

## ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ–¹å¼
### è‡ªå‹•åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
```javascript
function determineDownloadMethod(processedFiles) {
  const totalSize = processedFiles.reduce((sum, file) => sum + file.size, 0);
  
  // ZIPä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ4MBä»¥ä¸‹ï¼‰
  if (totalSize <= 4 * 1024 * 1024) {
    return 'ZIP';
  }
  
  // å€‹åˆ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ4MBè¶…éï¼‰
  return 'INDIVIDUAL';
}
```

### ZIPåœ§ç¸®ã‚¨ãƒ©ãƒ¼å¯¾ç­–
- **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹**: ãƒ¡ãƒ¢ãƒªä¸è¶³ã€åœ§ç¸®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ZIPç”Ÿæˆå¤±æ•—
- **å¯¾ç­–**: 
  - åœ§ç¸®å‰ã®ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
  - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–
  - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆå€‹åˆ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
### ä¸»è¦ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: æ‹¡å¼µå­ãƒ»ã‚µã‚¤ã‚ºãƒ»ç ´æãƒ•ã‚¡ã‚¤ãƒ«
- **ç”»åƒå‡¦ç†**: Canvas APIã‚¨ãƒ©ãƒ¼ã€å‡¦ç†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
- **èªè¨¼**: ç„¡åŠ¹ã‚³ãƒ¼ãƒ‰ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ‡ã‚Œã€DBæ¥ç¶šã‚¨ãƒ©ãƒ¼
- **ã‚­ãƒ¥ãƒ¼**: æº€æ¯ã€ç•°å¸¸çµ‚äº†ã€ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³
- **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**: ZIPåœ§ç¸®å¤±æ•—ã€ãƒ•ã‚¡ã‚¤ãƒ«ç ´æ

### ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºæ–¹é‡
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- æŠ€è¡“çš„è©³ç´°ã¯éš ã™
- å¾©æ—§æ–¹æ³•ã®æ˜ç¤º
- éƒ¨åˆ†å¤±æ•—æ™‚ã®ç¶™ç¶šå‡¦ç†

## æ³¨æ„äº‹é …
- å•†ç”¨åˆ©ç”¨å¯èƒ½ãƒ•ã‚©ãƒ³ãƒˆã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç¢ºèªå¿…é ˆ
- ãƒ–ãƒ©ã‚¦ã‚¶å‡¦ç†é™ç•Œã‚’è€ƒæ…®ã—ãŸã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†ã®æ¤œè¨
- Neon PostgreSQLç„¡æ–™ãƒ—ãƒ©ãƒ³ã®åˆ¶é™ã«æ³¨æ„

## è¦ä»¶å®šç¾©æ›¸ã¸ã®è¿½è¨˜å†…å®¹

### 3.6 ç®¡ç†è€…æ©Ÿèƒ½
- **ç®¡ç†ç”»é¢**ï¼šæ‹›å¾…ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»ç®¡ç†ã€ä½¿ç”¨çµ±è¨ˆè¡¨ç¤º
- **èªè¨¼æ–¹å¼**ï¼šå›ºå®šIDãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼‰
- **Slacké€šçŸ¥**ï¼šæ–°ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã®è‡ªå‹•é€šçŸ¥ï¼ˆWebhook URLæš—å·åŒ–ä¿å­˜ï¼‰

### 3.7 åŒæ™‚å‡¦ç†åˆ¶å¾¡
- **ã‚­ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ **ï¼š1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿å‡¦ç†ã€ä»–ã¯é †ç•ªå¾…ã¡
- **å¾…æ©Ÿè¡¨ç¤º**ï¼šã€Œé †ç•ªå¾…ã¡ä¸­... ã‚ã¨â—‹äººå¾…ã¡ã§ã™ã€
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**ï¼š10åˆ†ã§è‡ªå‹•è§£æ”¾

### 4.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»åˆ¶é™ï¼ˆæ›´æ–°ï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«åˆ¶é™**ï¼š1ãƒ•ã‚¡ã‚¤ãƒ«3MBä»¥ä¸‹ã€æœ€å¤§5ãƒ•ã‚¡ã‚¤ãƒ«ã€ç·è¨ˆ15MBä»¥ä¸‹
- **å‡¦ç†æ–¹å¼**ï¼šãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è‡ªå‹•æŒ¯ã‚Šåˆ†ã‘
  - è»½é‡å‡¦ç†ï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«1.5MBä»¥ä¸‹ï¼‰ï¼šCanvas APIï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰
  - é‡é‡å‡¦ç†ï¼ˆ2-5ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ï¼šSharp + Node.jsï¼ˆã‚µãƒ¼ãƒãƒ¼ï¼‰
- **åŒæ™‚å‡¦ç†**ï¼š1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã€ä»–ã¯ã‚­ãƒ¥ãƒ¼å¾…æ©Ÿï¼ˆæœ€å¤§5äººã€10åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰

### 4.2 ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ–¹å¼ï¼ˆæ–°è¦ï¼‰
- **è‡ªå‹•åˆ¤å®š**ï¼šå‡¦ç†å¾Œãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ4MBä»¥ä¸‹ã¯ZIPã€è¶…éæ™‚ã¯å€‹åˆ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- **ZIPåœ§ç¸®ã‚¨ãƒ©ãƒ¼å¯¾ç­–**ï¼šãƒ¡ãƒ¢ãƒªç›£è¦–ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½

### 3.5 èªè¨¼ï¼ˆæ›´æ–°ï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼**ï¼šæœˆæ¬¡æ‹›å¾…ã‚³ãƒ¼ãƒ‰ï¼ˆYYYYMM-XXXXXå½¢å¼ï¼‰
- **æœ‰åŠ¹æœŸé–“**ï¼šå½“æœˆæœ«ã¾ã§ï¼ˆæ™‚é–“åˆ¶é™ãªã—ï¼‰
- **ç®¡ç†è€…èªè¨¼**ï¼šå›ºå®šIDãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€JWTï¼ˆ24æ™‚é–“æœ‰åŠ¹ï¼‰

### 8.1 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆæ–°è¦ï¼‰
- **ä¸»è¦ã‚¨ãƒ©ãƒ¼**ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã€ç”»åƒå‡¦ç†ã€èªè¨¼ã€ã‚­ãƒ¥ãƒ¼ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- **è¡¨ç¤ºæ–¹é‡**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã€å¾©æ—§æ–¹æ³•æ˜ç¤ºã€éƒ¨åˆ†å¤±æ•—ç¶™ç¶š

## å®Ÿè£…é †åº

### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆå„ªå…ˆåº¦ï¼šé«˜ï¼‰
1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆãƒ»ä½œæˆ
2. åŸºæœ¬èªè¨¼APIï¼ˆæ‹›å¾…ã‚³ãƒ¼ãƒ‰èªè¨¼ï¼‰
3. ç°¡å˜ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èªè¨¼ç”»é¢

### Phase 2: ç®¡ç†æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦ï¼šé«˜ï¼‰
4. ç®¡ç†è€…èªè¨¼API
5. ç®¡ç†ç”»é¢UIï¼ˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»çµ±è¨ˆï¼‰
6. Slacké€šçŸ¥æ©Ÿèƒ½

### Phase 3: ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦ï¼šé«˜ï¼‰
7. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
8. è»½é‡å‡¦ç†ï¼ˆCanvas APIï¼‰å®Ÿè£…
9. åŸºæœ¬çš„ãªã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒ¼ã‚¯é©ç”¨
10. å€‹åˆ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

### Phase 4: æ‹¡å¼µæ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦ï¼šä¸­ï¼‰
11. é‡é‡å‡¦ç†ï¼ˆSharpï¼‰å®Ÿè£…
12. ZIPä¸€æ‹¬ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
13. è‡ªå‹•æŒ¯ã‚Šåˆ†ã‘ãƒ­ã‚¸ãƒƒã‚¯
14. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿

### Phase 5: å“è³ªå‘ä¸Šï¼ˆå„ªå…ˆåº¦ï¼šä¸­ï¼‰
15. ã‚­ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ãƒ»åŒæ™‚å‡¦ç†åˆ¶å¾¡
16. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
17. ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ãƒ»UIæ”¹å–„

**é–‹å§‹**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰å®Ÿè£…é–‹å§‹

## å®Ÿè£…é€²æ—çŠ¶æ³

### âœ… Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆå®Œäº†ï¼‰
- âœ… **1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆãƒ»ä½œæˆ** 
  - Neonãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆå®Œäº†
  - 5ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº† (invitation_codes, user_sessions, admin_sessions, admin_settings, processing_queue)
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ»åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥å®Œäº†
  - ã‚¹ã‚­ãƒ¼ãƒSQLå®Ÿè¡Œå®Œäº†
- âœ… **2. åŸºæœ¬èªè¨¼APIï¼ˆæ‹›å¾…ã‚³ãƒ¼ãƒ‰èªè¨¼ï¼‰** 
  - Vercelç’°å¢ƒå¤‰æ•°è¨­å®šå®Œäº†ï¼ˆDATABASE_URLé…ç½®æ¸ˆã¿ï¼‰
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç¢ºèªæ¸ˆã¿
  - èªè¨¼APIå®Ÿè£…å®Œäº†ï¼ˆ/api/auth/verify, /api/auth/sessionï¼‰
  - ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢æ•°å®Ÿè£…å®Œäº†ï¼ˆsrc/lib/auth.ts, src/lib/database.tsï¼‰
- âœ… **3. ç°¡å˜ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èªè¨¼ç”»é¢** 
  - Reactèªè¨¼ãƒ•ã‚©ãƒ¼ãƒ å®Ÿè£…å®Œäº†ï¼ˆsrc/app/auth/page.tsxï¼‰
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½å®Ÿè£…å®Œäº†ï¼ˆsrc/app/page.tsxï¼‰
  - ãƒ«ãƒ¼ãƒˆä¿è­·ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å®Ÿè£…å®Œäº†ï¼ˆsrc/middleware.tsï¼‰

### âœ… Phase 1 ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°å®Œäº†
- âœ… **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèª**
  - ã‚µãƒ³ãƒ—ãƒ«æ‹›å¾…ã‚³ãƒ¼ãƒ‰ã€Œ202501-SAMPLEã€ã§ã®èªè¨¼ãƒ†ã‚¹ãƒˆæˆåŠŸ
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®å‹•ä½œç¢ºèªå®Œäº†
  - å…¥åŠ›å€¤æ¤œè¨¼ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»APIï¼‰ã®èª¿æ•´å®Œäº†
  - æœ‰åŠ¹æœŸé™åˆ‡ã‚Œã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£å¯¾å¿œå®Œäº†

### â³ Phase 2: ç®¡ç†æ©Ÿèƒ½ï¼ˆæ¬¡å›å®Ÿè£…äºˆå®šï¼‰
- â³ 4. ç®¡ç†è€…èªè¨¼API
- â³ 5. ç®¡ç†ç”»é¢UIï¼ˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»çµ±è¨ˆï¼‰
- â³ 6. Slacké€šçŸ¥æ©Ÿèƒ½

### â³ Phase 3-5: å¾Œç¶šãƒ•ã‚§ãƒ¼ã‚ºï¼ˆæœªç€æ‰‹ï¼‰

### ğŸ“ å®Œäº†æ¸ˆã¿ä½œæ¥­ï¼ˆ2025/6/16ï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æ§‹æˆï¼ˆNext.js + TypeScript + Tailwindï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»ä½œæˆãƒ»æ¥ç¶š
- èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å®Œå…¨å®Ÿè£…ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰
- Gitãƒªãƒã‚¸ãƒˆãƒªç®¡ç†ãƒ»Vercelãƒ‡ãƒ—ãƒ­ã‚¤
- **å®Ÿéš›ã®å‹•ä½œãƒ†ã‚¹ãƒˆå®Œäº†** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­£å¸¸ã«ãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½ãªçŠ¶æ…‹

### ğŸ› ï¸ å®Ÿè£…è©³ç´°
#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«
```sql
invitation_codes   - æ‹›å¾…ã‚³ãƒ¼ãƒ‰ç®¡ç†
user_sessions     - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†  
admin_sessions    - ç®¡ç†è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
admin_settings    - ç®¡ç†è€…è¨­å®šï¼ˆSlack Webhookç­‰ï¼‰
processing_queue  - å‡¦ç†ã‚­ãƒ¥ãƒ¼ç®¡ç†
```

#### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```
POST /api/auth/verify     - æ‹›å¾…ã‚³ãƒ¼ãƒ‰èªè¨¼
GET  /api/auth/session    - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºèª
DELETE /api/auth/session  - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
GET  /api/debug          - ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—ï¼ˆé–‹ç™ºç”¨ï¼‰
POST /api/update-sample   - ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰æ›´æ–°ï¼ˆä¿å®ˆç”¨ï¼‰
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸
```
/              - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼ˆèªè¨¼å¾Œï¼‰
/auth          - èªè¨¼ãƒ•ã‚©ãƒ¼ãƒ 
/admin/*       - ç®¡ç†ç”»é¢ï¼ˆPhase 2ã§å®Ÿè£…äºˆå®šï¼‰
```

### ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨˜éŒ²
1. **æ‹›å¾…ã‚³ãƒ¼ãƒ‰å…¥åŠ›é•·åˆ¶é™** - maxLengthä¿®æ­£ï¼ˆ12â†’20æ–‡å­—ï¼‰
2. **APIæ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³** - å›ºå®šé•·{5}ã‚’å¯å¤‰é•·+ã«ä¿®æ­£
3. **æœ‰åŠ¹æœŸé™åˆ‡ã‚Œ** - 2025å¹´1æœˆâ†’6æœˆã¸ã®æ›´æ–°å¯¾å¿œ
4. **ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ä¿è­·** - ãƒ‡ãƒãƒƒã‚°ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å…¬é–‹è¨­å®š

### ğŸ“‹ æ¬¡å›ä½œæ¥­äºˆå®šï¼ˆPhase 2ï¼‰
1. ç®¡ç†è€…èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
   - ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆADMIN_USERNAME, ADMIN_PASSWORD_HASH, JWT_SECRETï¼‰
   - JWTèªè¨¼APIä½œæˆï¼ˆ/api/admin/authï¼‰
   - ç®¡ç†è€…å°‚ç”¨ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è¿½åŠ 
2. ç®¡ç†ç”»é¢UIã®å®Ÿè£…
   - æ‹›å¾…ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½
   - ä½¿ç”¨çŠ¶æ³çµ±è¨ˆè¡¨ç¤º
   - Slack Webhookè¨­å®šç”»é¢
3. Slacké€šçŸ¥æ©Ÿèƒ½ã®å®Ÿè£…
   - Webhook URLæš—å·åŒ–ä¿å­˜
   - æ–°ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã®è‡ªå‹•é€šçŸ¥

### ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æƒ…å ±
- **æœ¬ç•ªURL**: https://image-watermark-web-service.vercel.app
- **èªè¨¼**: ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã€Œ202501-SAMPLEã€ã§å‹•ä½œç¢ºèªæ¸ˆã¿
- **ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/Murasan201/image-watermark-web-service